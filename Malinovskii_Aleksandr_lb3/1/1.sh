#!/bin/bash

#!/bin/bash
# =============================================================================
# Скрипт для запуска и трассировки программ с заданием 1.1 и 1.2
# =============================================================================
# Цели:
# 1. Скомпилировать программы 1.1 и 1.2
# 2. Запустить программы с трассировкой системных вызовов
# 3. Проанализировать полученные результаты
# 
# Особенности реализации:
# - Использование strace для отслеживания сигналов и системных вызовов
# - Форматированный вывод для лучшей читаемости
# 
# Выводы:
# 1. strace позволяет детально отслеживать системные вызовы
# 2. Трассировка сигналов помогает понять взаимодействие нитей
# 3. Автоматизация процесса запуска и очистки
# =============================================================================


cd 1
gcc -o 1.1 1.1.c
gcc -o 1.2 1.2.c
echo "=============================================="
echo "                  ЗАДАНИЕ 1.1                 "
echo "=============================================="
strace -tt -e 'trace=signal,kill,tgkill,tkill,sigaction,sigprocmask' -f ./1.1
echo "=============================================="
echo "                  ЗАДАНИЕ 1.2                 "
echo "=============================================="
strace -tt -e 'trace=signal,kill,tgkill,tkill,sigaction,sigprocmask' -f ./1.2
rm 1.1 1.2