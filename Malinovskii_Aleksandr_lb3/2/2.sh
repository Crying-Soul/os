#!/bin/bash

# =============================================================================
# Скрипт для компиляции и трассировки программы перехвата сигналов
# =============================================================================
# Цели:
# 1. Скомпилировать программу перехвата сигналов
# 2. Запустить программу с разными режимами перехвата сигналов
# 3. Проанализировать результаты с помощью strace
# 
# Особенности реализации:
# - Использование strace для отслеживания системных вызовов
# - Различные режимы перехвата сигналов:
#   * process_single: однократный перехват SIGINT для процесса
#   * process_multi: многократный перехват SIGINT для процесса
#   * thread_single: однократный перехват SIGINT для потока
#   * thread_multi: многократный перехват SIGINT для потока
#   * custom_signal: переназначение другой комбинации клавиш (SIGQUIT)
# 
# Выводы:
# 1. strace позволяет детально отслеживать системные вызовы
# 2. Различные режимы перехвата сигналов демонстрируют гибкость
#    управления сигналами в программах
# 3. Автоматизация процесса запуска и очистки
# =============================================================================

cd 2
gcc -o 2 2.c
#sudo strace -tt -v -s 1000 -e trace=signal ./2 --process_single
#sudo strace -tt -v -s 1000 -e trace=signal ./2 --process_multi
#sudo strace -tt -v -s 1000 -e trace=signal ./2 --thread_single
#sudo strace -tt -v -s 1000 -e trace=signal ./2 --thread_multi
#sudo strace -tt -v -s 1000 -e trace=signal ./2 --custom_signal
rm 2