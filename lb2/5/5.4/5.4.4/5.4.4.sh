#!/bin/bash
"""
Функциональность:
1. Сравнительный тест работы sched_yield():
   - Параллельный запуск 3 процессов с SCHED_RR
   - Одинаковый приоритет (30) для всех процессов
   - Принудительная привязка к CPU 0 (taskset -c 0)
   - Ожидание завершения всех процессов

2. Особенности реализации:
   - Использование sudo для реального времени
   - Четкое логирование этапов выполнения
   - Автоматическое управление процессами
   - Демонстрация кооперативной многозадачности
"""
# Пути к исполняемым файлам
EXECUTABLES=("src/5/5.4/5.4.4/5.4.4-prog1" "src/5/5.4/5.4.4/5.4.4-prog2" "src/5/5.4/5.4.4/5.4.4-prog3")

SAME_PRIORITY=30
# Функция для ожидания завершения группы процессов
wait_for_processes() {
    for pid in "$@"; do
        wait "$pid"
    done
}

echo "Запуск тестов с sched_yeld..."
pids=()
for exe in "${EXECUTABLES[@]}"; do
    echo "Запуск $exe с приоритетом $SAME_PRIORITY"
    sudo taskset -c 0 "$exe" "$SAME_PRIORITY" &
    pids+=($!)
done
wait_for_processes "${pids[@]}"




